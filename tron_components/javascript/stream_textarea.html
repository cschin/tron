<script> // for streaming text area
    window.process_special_events["stream_textarea_control"] = (target, state, event_data) => {

        if ("stream_textarea_control" in event_data && event_data["stream_textarea_control"] == "append_text") {
            let elm = document.getElementById(target);
            if (elm !== null) {
                elm.innerHTML = elm.innerHTML + event_data["payload"];
                elm.scrollTop = elm.scrollHeight;
            }
            else {
                console.log(`Element with id '${target}' not found`);
            }
        };

        if ("stream_textarea_control" in event_data && event_data["stream_textarea_control"] == "update_text") {
            let elm = document.getElementById(target);
            if (elm !== null) {
                elm.innerHTML = "";
            } else {
                console.log(`Element with id '${target}' not found`);
            }


        };

    }
</script>